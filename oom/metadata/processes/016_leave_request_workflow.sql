-- =====================================================================
-- LEAVE REQUEST WORKFLOW
-- Employee leave application and approval process
-- Generated: 2025-11-10
-- =====================================================================

PRAGMA foreign_keys = ON;

INSERT OR IGNORE INTO process_graph (
    id, code, name, description, entity_id, version_number,
    is_active, is_published, category, created_at
) VALUES (
    'LREQ0000-WRFL-4111-W111-000000000001',
    'LEAVE_REQUEST_WORKFLOW',
    'Leave Request & Approval',
    'Submit and approve employee leave requests with balance verification',
    'l1e1a1v1-r1q1-4s1t-a111-111111111111',  -- LEAVE_REQUEST entity
    1, 1, 1, 'HR_LEAVE_ATTENDANCE', datetime('now')
);

-- Nodes
INSERT OR IGNORE INTO process_node (id, graph_id, node_code, node_name, node_type, description, position_id, permission_type_id, sla_hours, display_x, display_y, created_at) VALUES
('LREQ0001-WRFL-4111-W111-000000000001', 'LREQ0000-WRFL-4111-W111-000000000001', 'START', 'Start', 'START', 'Employee initiates leave', NULL, NULL, NULL, 100, 100, datetime('now')),
('LREQ0002-WRFL-4111-W111-000000000001', 'LREQ0000-WRFL-4111-W111-000000000001', 'SUBMIT_REQUEST', 'Submit Leave Request', 'TASK', 'Fill leave application', NULL, NULL, 1, 200, 100, datetime('now')),
('LREQ0003-WRFL-4111-W111-000000000001', 'LREQ0000-WRFL-4111-W111-000000000001', 'CHECK_BALANCE', 'Check Leave Balance', 'TASK', 'Verify available balance', NULL, NULL, 1, 300, 100, datetime('now')),
('LREQ0004-WRFL-4111-W111-000000000001', 'LREQ0000-WRFL-4111-W111-000000000001', 'MANAGER_REVIEW', 'Manager Review', 'TASK', 'Reporting manager reviews', NULL, NULL, 24, 400, 100, datetime('now')),
('LREQ0005-WRFL-4111-W111-000000000001', 'LREQ0000-WRFL-4111-W111-000000000001', 'HR_APPROVAL', 'HR Approval', 'TASK', 'HR final approval', NULL, NULL, 12, 500, 100, datetime('now')),
('LREQ0006-WRFL-4111-W111-000000000001', 'LREQ0000-WRFL-4111-W111-000000000001', 'UPDATE_BALANCE', 'Update Leave Balance', 'TASK', 'Deduct from balance', NULL, NULL, 1, 600, 100, datetime('now')),
('LREQ0007-WRFL-4111-W111-000000000001', 'LREQ0000-WRFL-4111-W111-000000000001', 'NOTIFY_APPROVAL', 'Notify Employee', 'TASK', 'Send approval notification', NULL, NULL, 1, 700, 100, datetime('now')),
('LREQ0008-WRFL-4111-W111-000000000001', 'LREQ0000-WRFL-4111-W111-000000000001', 'INSUFFICIENT_BALANCE', 'Insufficient Balance', 'TASK', 'Reject due to balance', NULL, NULL, 1, 300, 200, datetime('now')),
('LREQ0009-WRFL-4111-W111-000000000001', 'LREQ0000-WRFL-4111-W111-000000000001', 'REJECTED', 'Leave Rejected', 'TASK', 'Send rejection notification', NULL, NULL, 1, 400, 200, datetime('now')),
('LREQ0010-WRFL-4111-W111-000000000001', 'LREQ0000-WRFL-4111-W111-000000000001', 'END', 'End', 'END', 'Leave process complete', NULL, NULL, NULL, 800, 150, datetime('now'));

-- Edges
INSERT OR IGNORE INTO process_edge (id, graph_id, from_node_id, to_node_id, edge_label, edge_order, completion_action, created_at) VALUES
('LREQE001-WRFL-4111-W111-000000000001', 'LREQ0000-WRFL-4111-W111-000000000001', 'LREQ0001-WRFL-4111-W111-000000000001', 'LREQ0002-WRFL-4111-W111-000000000001', 'Begin', 1, NULL, datetime('now')),
('LREQE002-WRFL-4111-W111-000000000001', 'LREQ0000-WRFL-4111-W111-000000000001', 'LREQ0002-WRFL-4111-W111-000000000001', 'LREQ0003-WRFL-4111-W111-000000000001', 'Submitted', 1, 'COMPLETE', datetime('now')),
('LREQE003-WRFL-4111-W111-000000000001', 'LREQ0000-WRFL-4111-W111-000000000001', 'LREQ0003-WRFL-4111-W111-000000000001', 'LREQ0004-WRFL-4111-W111-000000000001', 'Balance Available', 1, 'APPROVE', datetime('now')),
('LREQE004-WRFL-4111-W111-000000000001', 'LREQ0000-WRFL-4111-W111-000000000001', 'LREQ0003-WRFL-4111-W111-000000000001', 'LREQ0008-WRFL-4111-W111-000000000001', 'Insufficient', 2, 'REJECT', datetime('now')),
('LREQE005-WRFL-4111-W111-000000000001', 'LREQ0000-WRFL-4111-W111-000000000001', 'LREQ0004-WRFL-4111-W111-000000000001', 'LREQ0005-WRFL-4111-W111-000000000001', 'Approved', 1, 'APPROVE', datetime('now')),
('LREQE006-WRFL-4111-W111-000000000001', 'LREQ0000-WRFL-4111-W111-000000000001', 'LREQ0004-WRFL-4111-W111-000000000001', 'LREQ0009-WRFL-4111-W111-000000000001', 'Rejected', 2, 'REJECT', datetime('now')),
('LREQE007-WRFL-4111-W111-000000000001', 'LREQ0000-WRFL-4111-W111-000000000001', 'LREQ0005-WRFL-4111-W111-000000000001', 'LREQ0006-WRFL-4111-W111-000000000001', 'Approved', 1, 'APPROVE', datetime('now')),
('LREQE008-WRFL-4111-W111-000000000001', 'LREQ0000-WRFL-4111-W111-000000000001', 'LREQ0005-WRFL-4111-W111-000000000001', 'LREQ0009-WRFL-4111-W111-000000000001', 'Rejected', 2, 'REJECT', datetime('now')),
('LREQE009-WRFL-4111-W111-000000000001', 'LREQ0000-WRFL-4111-W111-000000000001', 'LREQ0006-WRFL-4111-W111-000000000001', 'LREQ0007-WRFL-4111-W111-000000000001', 'Updated', 1, 'COMPLETE', datetime('now')),
('LREQE010-WRFL-4111-W111-000000000001', 'LREQ0000-WRFL-4111-W111-000000000001', 'LREQ0007-WRFL-4111-W111-000000000001', 'LREQ0010-WRFL-4111-W111-000000000001', 'Notified', 1, 'COMPLETE', datetime('now')),
('LREQE011-WRFL-4111-W111-000000000001', 'LREQ0000-WRFL-4111-W111-000000000001', 'LREQ0008-WRFL-4111-W111-000000000001', 'LREQ0010-WRFL-4111-W111-000000000001', 'Rejected', 1, 'COMPLETE', datetime('now')),
('LREQE012-WRFL-4111-W111-000000000001', 'LREQ0000-WRFL-4111-W111-000000000001', 'LREQ0009-WRFL-4111-W111-000000000001', 'LREQ0010-WRFL-4111-W111-000000000001', 'Notified', 1, 'COMPLETE', datetime('now'));
