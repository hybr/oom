-- =====================================================================
-- EXIT CLEARANCE WORKFLOW
-- Employee offboarding and clearance process
-- Generated: 2025-11-10
-- =====================================================================

PRAGMA foreign_keys = ON;

INSERT OR IGNORE INTO process_graph (
    id, code, name, description, entity_id, version_number,
    is_active, is_published, category, created_at
) VALUES (
    'EXTC0000-WRFL-4111-W111-000000000001',
    'EXIT_CLEARANCE_WORKFLOW',
    'Employee Exit & Clearance Process',
    'Full exit clearance from resignation to final settlement',
    'e1x1i1t1-c1l1-4r1n-c111-111111111111',  -- EXIT_CLEARANCE entity
    1, 1, 1, 'HR_EMPLOYEE_LIFECYCLE', datetime('now')
);

-- Nodes
INSERT OR IGNORE INTO process_node (id, graph_id, node_code, node_name, node_type, description, position_id, permission_type_id, sla_hours, display_x, display_y, created_at) VALUES
('EXTC0001-WRFL-4111-W111-000000000001', 'EXTC0000-WRFL-4111-W111-000000000001', 'START', 'Start', 'START', 'Resignation submitted', NULL, NULL, NULL, 100, 100, datetime('now')),
('EXTC0002-WRFL-4111-W111-000000000001', 'EXTC0000-WRFL-4111-W111-000000000001', 'ACCEPT_RESIGNATION', 'Accept Resignation', 'TASK', 'Manager accepts resignation', NULL, NULL, 48, 200, 100, datetime('now')),
('EXTC0003-WRFL-4111-W111-000000000001', 'EXTC0000-WRFL-4111-W111-000000000001', 'CREATE_CLEARANCE', 'Create Exit Clearance', 'TASK', 'Generate clearance checklist', NULL, NULL, 24, 300, 100, datetime('now')),
('EXTC0004-WRFL-4111-W111-000000000001', 'EXTC0000-WRFL-4111-W111-000000000001', 'KNOWLEDGE_TRANSFER', 'Knowledge Transfer', 'TASK', 'Handover tasks and knowledge', NULL, NULL, 240, 400, 100, datetime('now')),
('EXTC0005-WRFL-4111-W111-000000000001', 'EXTC0000-WRFL-4111-W111-000000000001', 'EXIT_INTERVIEW', 'Conduct Exit Interview', 'TASK', 'HR exit interview', NULL, NULL, 48, 500, 100, datetime('now')),
('EXTC0006-WRFL-4111-W111-000000000001', 'EXTC0000-WRFL-4111-W111-000000000001', 'COLLECT_ASSETS', 'Collect Company Assets', 'TASK', 'Return all assets', NULL, NULL, 24, 600, 100, datetime('now')),
('EXTC0007-WRFL-4111-W111-000000000001', 'EXTC0000-WRFL-4111-W111-000000000001', 'IT_CLEARANCE', 'IT Clearance', 'TASK', 'Revoke system access', NULL, NULL, 8, 700, 100, datetime('now')),
('EXTC0008-WRFL-4111-W111-000000000001', 'EXTC0000-WRFL-4111-W111-000000000001', 'HR_CLEARANCE', 'HR Clearance', 'TASK', 'HR final clearance', NULL, NULL, 24, 800, 100, datetime('now')),
('EXTC0009-WRFL-4111-W111-000000000001', 'EXTC0000-WRFL-4111-W111-000000000001', 'FINANCE_CLEARANCE', 'Finance Clearance', 'TASK', 'Check dues and advances', NULL, NULL, 48, 900, 100, datetime('now')),
('EXTC0010-WRFL-4111-W111-000000000001', 'EXTC0000-WRFL-4111-W111-000000000001', 'ADMIN_CLEARANCE', 'Admin Clearance', 'TASK', 'Admin department clearance', NULL, NULL, 24, 1000, 100, datetime('now')),
('EXTC0011-WRFL-4111-W111-000000000001', 'EXTC0000-WRFL-4111-W111-000000000001', 'CALCULATE_FNF', 'Calculate Final Settlement', 'TASK', 'Full and final settlement', NULL, NULL, 48, 1100, 100, datetime('now')),
('EXTC0012-WRFL-4111-W111-000000000001', 'EXTC0000-WRFL-4111-W111-000000000001', 'PROCESS_PAYMENT', 'Process FNF Payment', 'TASK', 'Disburse settlement', NULL, NULL, 72, 1200, 100, datetime('now')),
('EXTC0013-WRFL-4111-W111-000000000001', 'EXTC0000-WRFL-4111-W111-000000000001', 'ISSUE_NDC', 'Issue No Dues Certificate', 'TASK', 'Generate NDC', NULL, NULL, 24, 1300, 100, datetime('now')),
('EXTC0014-WRFL-4111-W111-000000000001', 'EXTC0000-WRFL-4111-W111-000000000001', 'ISSUE_EXPERIENCE_CERT', 'Issue Experience Certificate', 'TASK', 'Generate experience letter', NULL, NULL, 24, 1400, 100, datetime('now')),
('EXTC0015-WRFL-4111-W111-000000000001', 'EXTC0000-WRFL-4111-W111-000000000001', 'END', 'End', 'END', 'Exit clearance complete', NULL, NULL, NULL, 1500, 100, datetime('now'));

-- Edges
INSERT OR IGNORE INTO process_edge (id, graph_id, from_node_id, to_node_id, edge_label, edge_order, completion_action, created_at) VALUES
('EXTCE001-WRFL-4111-W111-000000000001', 'EXTC0000-WRFL-4111-W111-000000000001', 'EXTC0001-WRFL-4111-W111-000000000001', 'EXTC0002-WRFL-4111-W111-000000000001', 'Begin', 1, NULL, datetime('now')),
('EXTCE002-WRFL-4111-W111-000000000001', 'EXTC0000-WRFL-4111-W111-000000000001', 'EXTC0002-WRFL-4111-W111-000000000001', 'EXTC0003-WRFL-4111-W111-000000000001', 'Accepted', 1, 'APPROVE', datetime('now')),
('EXTCE003-WRFL-4111-W111-000000000001', 'EXTC0000-WRFL-4111-W111-000000000001', 'EXTC0003-WRFL-4111-W111-000000000001', 'EXTC0004-WRFL-4111-W111-000000000001', 'Created', 1, 'COMPLETE', datetime('now')),
('EXTCE004-WRFL-4111-W111-000000000001', 'EXTC0000-WRFL-4111-W111-000000000001', 'EXTC0004-WRFL-4111-W111-000000000001', 'EXTC0005-WRFL-4111-W111-000000000001', 'Handover Done', 1, 'COMPLETE', datetime('now')),
('EXTCE005-WRFL-4111-W111-000000000001', 'EXTC0000-WRFL-4111-W111-000000000001', 'EXTC0005-WRFL-4111-W111-000000000001', 'EXTC0006-WRFL-4111-W111-000000000001', 'Interview Done', 1, 'COMPLETE', datetime('now')),
('EXTCE006-WRFL-4111-W111-000000000001', 'EXTC0000-WRFL-4111-W111-000000000001', 'EXTC0006-WRFL-4111-W111-000000000001', 'EXTC0007-WRFL-4111-W111-000000000001', 'Assets Returned', 1, 'COMPLETE', datetime('now')),
('EXTCE007-WRFL-4111-W111-000000000001', 'EXTC0000-WRFL-4111-W111-000000000001', 'EXTC0007-WRFL-4111-W111-000000000001', 'EXTC0008-WRFL-4111-W111-000000000001', 'IT Cleared', 1, 'COMPLETE', datetime('now')),
('EXTCE008-WRFL-4111-W111-000000000001', 'EXTC0000-WRFL-4111-W111-000000000001', 'EXTC0008-WRFL-4111-W111-000000000001', 'EXTC0009-WRFL-4111-W111-000000000001', 'HR Cleared', 1, 'COMPLETE', datetime('now')),
('EXTCE009-WRFL-4111-W111-000000000001', 'EXTC0000-WRFL-4111-W111-000000000001', 'EXTC0009-WRFL-4111-W111-000000000001', 'EXTC0010-WRFL-4111-W111-000000000001', 'Finance Cleared', 1, 'COMPLETE', datetime('now')),
('EXTCE010-WRFL-4111-W111-000000000001', 'EXTC0000-WRFL-4111-W111-000000000001', 'EXTC0010-WRFL-4111-W111-000000000001', 'EXTC0011-WRFL-4111-W111-000000000001', 'Admin Cleared', 1, 'COMPLETE', datetime('now')),
('EXTCE011-WRFL-4111-W111-000000000001', 'EXTC0000-WRFL-4111-W111-000000000001', 'EXTC0011-WRFL-4111-W111-000000000001', 'EXTC0012-WRFL-4111-W111-000000000001', 'Settlement Ready', 1, 'COMPLETE', datetime('now')),
('EXTCE012-WRFL-4111-W111-000000000001', 'EXTC0000-WRFL-4111-W111-000000000001', 'EXTC0012-WRFL-4111-W111-000000000001', 'EXTC0013-WRFL-4111-W111-000000000001', 'Payment Done', 1, 'COMPLETE', datetime('now')),
('EXTCE013-WRFL-4111-W111-000000000001', 'EXTC0000-WRFL-4111-W111-000000000001', 'EXTC0013-WRFL-4111-W111-000000000001', 'EXTC0014-WRFL-4111-W111-000000000001', 'NDC Issued', 1, 'COMPLETE', datetime('now')),
('EXTCE014-WRFL-4111-W111-000000000001', 'EXTC0000-WRFL-4111-W111-000000000001', 'EXTC0014-WRFL-4111-W111-000000000001', 'EXTC0015-WRFL-4111-W111-000000000001', 'Certificate Issued', 1, 'COMPLETE', datetime('now'));
